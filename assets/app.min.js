!function(s){s.fn.extend({preview_video:function(o){var e=this,n=s("body"),l=s.extend({notClickable:".content",escapeKey:!1,overflow:!0,overflowClass:"modal_open",showClass:"show",onInit:function(){},onClose:function(){},onOpen:function(){}},o);e.click(function(o){e.removeClass(l.showClass),l.overflow&&n.css({overflow:"auto"}),n.removeClass(l.overflowClass),l.onClose.call(),o.preventDefault()}),l.notClickable&&s(l.notClickable).click(function(o){o.stopPropagation()}),l.escapeKey&&s(document).keyup(function(o){27==o.keyCode&&e.click(),o.preventDefault()}),e.hasClass(l.showClass)?e.click():(l.overflow&&n.css({overflow:"hidden"}),n.addClass(l.overflowClass),l.onOpen.call(),e.addClass(l.showClass)),l.onInit.call()}}),s(document).ready(function(){s('a[href*="youtube"][target="_blank"]').click(function(o){$modal=s("#preview_video"),$this=s(this),$modal.preview_video({onOpen:function(){var o=$this.attr("href");$modal.addClass("loading"),s.getJSON("https://www.youtube.com/oembed?url="+o+"&format=json",function(o){$modal.removeClass("loading"),content=o.html,$modal.find(".content").html(content).append('<a href="#close" class="close"></a>'),$modal.find(".close").on("click",function(o){$modal.click(),o.preventDefault()})})},onClose:function(){$modal.find(".content").html("")},showClass:"visible",overflowClass:"modal_preview_video"}),o.preventDefault()})})}(jQuery);