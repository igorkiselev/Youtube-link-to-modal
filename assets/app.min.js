!function(o){o.fn.extend({preview_video:function(e){var n=this,l=o("body"),t=o.extend({notClickable:".content",escapeKey:!1,overflow:!0,overflowClass:"modal_open",showClass:"show",onInit:function(){},onClose:function(){},onOpen:function(){}},e);n.click(function(o){n.removeClass(t.showClass),t.overflow&&l.css({overflow:"auto"}),l.removeClass(t.overflowClass),t.onClose.call(),o.preventDefault()}),t.notClickable&&o(t.notClickable).click(function(o){o.stopPropagation()}),t.escapeKey&&o(document).keyup(function(o){27==o.keyCode&&n.click(),o.preventDefault()}),n.hasClass(t.showClass)?n.click():(t.overflow&&l.css({overflow:"hidden"}),l.addClass(t.overflowClass),t.onOpen.call(),n.addClass(t.showClass)),t.onInit.call()}}),o(document).ready(function(){o('a[href*="youtube"][target="_blank"]').click(function(e){$modal=o("#preview_video"),$this=o(this),$modal.preview_video({onOpen:function(){var e=$this.attr("href");$modal.addClass("loading"),o.getJSON("https://www.youtube.com/oembed?url="+e+"&format=json",function(o){$modal.removeClass("loading"),content=o.html,$modal.find(".content").css({"aspect-ratio":o.width+" / "+o.height}).html(content).append('<a href="#close" class="close"></a>'),$modal.find(".close").on("click",function(o){$modal.click(),o.preventDefault()})})},onClose:function(){$modal.find(".content").html("")},showClass:"visible",overflowClass:"modal_preview_video"}),e.preventDefault()}),o('a[href*="vimeo"][target="_blank"]').click(function(e){$modal=o("#preview_video"),$this=o(this),$modal.preview_video({onOpen:function(){var e=$this.attr("href");$modal.addClass("loading"),o.getJSON("https://vimeo.com/api/oembed.json?url="+e,function(o){$modal.removeClass("loading"),content=o.html,$modal.find(".content").css({"aspect-ratio":o.width+" / "+o.height}).html(content).append('<a href="#close" class="close"></a>'),$modal.find(".close").on("click",function(o){$modal.click(),o.preventDefault()})})},onClose:function(){$modal.find(".content").html("")},showClass:"visible",overflowClass:"modal_preview_video"}),e.preventDefault()})})}(jQuery);